name: CI Pipeline

on:
    push:
        branches: [ main, develop ]
    pull_request:
        branches: [ main, develop ]
    workflow_dispatch: {} # manual trigger

# Top-level environment variables (available in all jobs)
env:
    APP_NAME: my-app
    NODE_ENV: production

concurrency:
    group: ${{ github.workflow }}-${{ github.ref }}
    cancel-in-progress: true

permissions:
    contents: read
    pull-requests: write
    id-token: write

jobs:
    build-and-test:
        name: Build & Test
        runs-on: ubuntu-latest
        env:
            myNull: ${{ null }}
            myBoolean: ${{ false }}
            myIntegerNumber: ${{ 711 }}
            myFloatNumber: ${{ -9.2 }}
            myHexNumber: ${{ 0xff }}
            myExponentialNumber: ${{ -2.99e-2 }}
            myString: Mona the Octocat
            myStringInBraces: ${{ 'It''s open source!' }}
        steps:
            - name: printing env variables
              run: |
                  echo "APP_NAME: $APP_NAME"
                  echo "NODE_ENV: $NODE_ENV"
                  echo "myNull: $myNull"
                  echo "myBoolean: $myBoolean"
                  echo "myIntegerNumber: $myIntegerNumber"
                  echo "myFloatNumber: $myFloatNumber"
                  echo "myHexNumber: $myHexNumber"
                  echo "myExponentialNumber: $myExponentialNumber"
                  echo "myString: $myString"
                  echo "myStringInBraces: $myStringInBraces"
            - id: outputs-demo
              run: echo "::set-output name=build_status::success"
            - name: use output
              run: echo "Build status is ${{ steps.outputs-demo.outputs.build_status }}"
            - run: |
                  echo "This is ref: ${{ github.ref }}"
